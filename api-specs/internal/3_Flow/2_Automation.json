{
  "swagger": "2.0",
  "info": {
    "title": "Automation",
    "description": "\n Automation enables you to set up automation based on tasks' events and data sourceâ€™s events. It might help you automate creation of tasks, task assignment, task placement, task webhook, data source update, datasource creation, and data source webhook. Automation attributes consist of IDs, automation name, automation type, automation details, and rules.\n\n**Below is detail each field for Body API Configuration**\n \n | Field | Type | Format | Description | \n |---|---|---|---|\n | _id | <a href='#introduction-format'>string</a> | *24 characters of hexadecimal* | Unique identifier for the automation<br>that generated by system.<br>**Example**: `6352736c628401059b37a2e2`|\n | name | <a href='#introduction-format'>string</a> |  | The name of automation.<br>**Example**: `Auto assign 1` |\n | organizationId | <a href='#introduction-format'>string</a> | *24 characters of hexadecimal* | The identifier for the organization<br>that generated by system.<br>**Example:** `634e98098ce07d29474a7e22`|\n | isActive | <a href='#introduction-format'>boolean</a> |  | Automation's active state, only active automation will proceed by system <br>**Default**: `true` |\n | dataType | <a href='#introduction-format'>string</a> | There are 2 types of dataType:<br>**enum**: `task`, `data` | Automation's data type.<br>**Example**: `task` |\n | event | <a href='#introduction-format'>string</a> | There are 3 types of event for dataType `task`:<br>**enum**: `onTaskCreated`, `onTaskFinished`, `onTaskAssigned` <br><br> There are 1 types of event for dataType `data`:<br>**enum**: `onDataSourceCreated` | Act as a trigger that start an automation. <br> **onTaskCreated**: Automation will happen when a task is created. <br> **onTaskFinished**: Automation will happen when a task is finished (status task: Done). <br> **onTaskAssigned**: Automation will happen when a task is assigned to field user(s). <br> **onDataSourceCreated**: Automation will happen when a datasource is created.<br>**Example**: `onTaskAssigned`|\n | automationType | <a href='#introduction-format'>string</a> | There are 6 types of automationType for dataType `task`:<br>  **enum**: `createTask`, `moveTask`, `assignTask`, `webhook`, `createAssignTask`, `createOrUpdateDataSource` <br><br> There are 2 types of automationType for dataType `data`:<br>  **enum**: `createTask`, `webhook` | Automation's type. The action of automation.<br> **createTask**: The task will create when an event happens. <br> **createAssignTask**: will create assigned task when an event happens. <br> **moveTask**: The task will move to the selected hub when an event happens. <br> **assignTask**: The task will automatically assigned to the selected user on a hub when an event happens. <br> **webhook**: The data task or data source will sent to the specific URL when an event happens.<br> **createOrUpdateDataSource**: The data source will create or update when an event happens.<br> **Example**: `assignTask`|\n | automationDetails | <a href='#introduction-format'>object</a> | Object with format according to *automationType*<br> **Format of automationType 'moveTask' :**<br>`{`<br>`'hubId':'hubId'`<br>`}`<br> **Format of automationType 'assignTask' :**<br>`{`<br>`'hubId':'hubId',`<br>`'assignee':'[mail@domain.com]'`<br>`}`<br> **Format of automationType 'webhook' :**<br>`{`<br>`'url':'https://webhook.url',`<br>`'headers': {`<br>&nbsp;&nbsp;`'header-1':'value-1'`<br>&nbsp;&nbsp;`'header-n':'value-n'`<br>&nbsp;&nbsp;`}`<br>`}`<br> **Format of automationType 'createTask' :**<br>`{`<br>`'flow':'flowName',`<br>`'taskData': {`<br>&nbsp;&nbsp;`'field-1':'value-1'`<br>&nbsp;&nbsp;`'field-n':'value-n'`<br>&nbsp;&nbsp;`}`<br>`}`<br> **Format of automationType 'createAssignTask' :**<br>`{`<br>`'flow':'flowName',`<br>`'hubId':'hubId',`<br>`'assignee':'[mail@domain.com]',`<br>`'taskData': {`<br>&nbsp;&nbsp;`'field-1':'value-1'`<br>&nbsp;&nbsp;`'field-n':'value-n'`<br>&nbsp;&nbsp;`}`<br>`}`<br> **Format of automationType 'createOrUpdateDataSource' :**<br>`{`<br>`'dataTypeId':'644fcd63562387038543fce2',`<br>`'dataTypeName':'dataTypeName',`<br>`'dataId':'dataId-refference',`<br>`'dataSource': {`<br>&nbsp;&nbsp;`'field-1':'value-1'`<br>&nbsp;&nbsp;`'field-n':'value-n'`<br>&nbsp;&nbsp;`}`<br>`}`<br> |  Set of fields according to the selected automation type. Each automationType have different details.<br> **Example for automationType 'moveTask' :**<br>`{`<br>`'hubId':'634e98498ce07d29474a7e29'`<br>`}`<br> **Example for automationType 'assignTask' :**<br>`{`<br>`'hubId':'634e98498ce07d29474a7e29',`<br>`'assignee':['roberto@mile.app']`<br>`}`<br> **Example for automationType 'webhook' :**<br>`{`<br>`'url':'https://apiweb.mile.app/webhook',`<br>`'headers': {`<br>&nbsp;&nbsp;`'x-api-key'`:`'1234e98498ce07d29474a7ev2'`<br>&nbsp;&nbsp;`'org'`:`'general'`<br>&nbsp;&nbsp;`}`<br>`}`<br> **Example for automationType 'createTask' :**<br>`{`<br>`'flow':'Visit',`<br>`'taskData': {`<br>&nbsp;&nbsp;`'customerName'`:`'vasco'`<br>&nbsp;&nbsp;`'address'`:`'Jakarta'`<br>&nbsp;&nbsp;`'description'`:`'$refFlow.name'`<br>&nbsp;&nbsp;`}`<br>`}`<br> **Example for automationType 'createAssignTask' :**<br>`{`<br>`'flow':'Visit',`<br>`'hubId':'634e98498ce07d29474a7e29',`<br>`'assignee':['roberto@mile.app'],`<br>`'taskData': {`<br>&nbsp;&nbsp;`'customerName'`:`'vasco'`<br>&nbsp;&nbsp;`'address'`:`'Jakarta'`<br>&nbsp;&nbsp;`'description'`:`'$refFlow.name'`<br>&nbsp;&nbsp;`}`<br>`}`<br>**Example for automationType 'createOrUpdateDataSource' :**<br>`{`<br>`'dataTypeId':'644fcd63562387038543fce2',`<br>`'dataTypeName':'customer',`<br>`'dataId':'$refFlow.pickupNumber',`<br>`'taskData': {`<br>&nbsp;&nbsp;`'customerName'`:`'vasco'`<br>&nbsp;&nbsp;`'address'`:`'Jakarta'`<br>&nbsp;&nbsp;`'description'`:`'$refFlow.name'`<br>&nbsp;&nbsp;`}`<br>`}`\n |  \n | automationDetails.hubId | <a href='#introduction-format'>string</a> | *24 characters of hexadecimal* | Hub identifier to define task location when an event happens.<br>Use <a href='#Setting_Hub'>GET /hubs API</a> to get the list of Hub IDs.<br>`hubId` is required when *automationType* value is `moveTask`, `assignTask`, or `createAssignTask`.<br>**Example:** `634e98498ce07d29474a7e29` |\n | automationDetails.assignee | <a href='#introduction-format'>array of strings</a> | *String with Email Format*<br>`['name@domain.com']` | Worker's email that assigned to the task.<br>One task can be assigned by multiple worker.<br>`assignee` is required when *automationType* value is `assignTask`, or `createAssignTask`.<br>**Example**: `['roberto@mile.app']` |\n | automationDetails.url | <a href='#introduction-format'>string</a> | *String with URL Format*<br>`https://domain.com` | The address that payloads are sent to.<br>`url` is required when *automationType* value is `webhook`.<br>**Example**: `https://apiweb.mile.app/webhook` |\n | automationDetails.headers | <a href='#introduction-format'>object</a> | *Header Object*<br>`{`<br>`'header1':'value1',`<br>`'header2':'value2'`<br>`}` | Used to to provide additional information when default headers are not enough then they can use a custom header configuration.<br>`headers` is required when *automationType* value is `webhook`.<br>**Example:**<br>`{`<br>`'x-api-key'`:`'1234e98498ce07d29474a7ev2'`,<br>`'org'`:`'general'`<br>`}` |\n | automationDetails.flow | <a href='#introduction-format'>string</a> | *Available Flow on organization* | FlowName to select specific task format to be created on automation event.<br>Use <a href='#Setting_Flow'>GET /flows API</a> to get the list of Flow.<br>`flow` is required when *automationType* value is `createTask`, or `createAssignTask`.<br>**Example:** `Visit` |\n | automationDetails.taskData | <a href='#introduction-format'>object</a> | Available fields of Flow's initial page.<br>List of fields are from `automationDetails.flow` | The task will be created with the given data (different flow may have different sets of field).<br>`taskData` is required when *automationType* value is `createTask`, or `createAssignTask`.<br>**Example:** <br>`{`<br>`'customerName'`:`'vasco'`,<br>`'address'`:`'Jakarta'`,<br>`'description'`:`'$refFlow.name'`<br>`}`<br>The value can be set as static value such as: `'Jakarta'`.<br>or set as dynamic value according to `rules.flow` such as : `'$refFlow.name'` |\n | automationDetails.dataId | <a href='#introduction-format'>string</a> | *Available field id according to rule flow* | Data Id to select specific flow's component id format to be executed on automation event.<br>Use <a href='#Setting_Flow'>GET /flow/{flowId} API</a> to get the list of fields's id from Flow.<br>`dataId` is required when *automationType* value is `createOrUpdateDataSource`.<br>**Example:** `$refFlow.pickupNumber` |\n | automationDetails.dataTypeId | <a href='#introduction-format'>string</a> | *Available Data Type on organization* | Data Type Id to select specific data source format to be executed on automation event.<br>Use <a href='#Data_DataType'>GET /data-types API</a> to get the list of Data Type.<br>`dataTypeId` is required when *automationType* value is `createOrUpdateDataSource`.<br>**Example:** `644fcd63562387038543fce2` |\n | automationDetails.dataTypeName | <a href='#introduction-format'>string</a> | *Data Type Name according to Data Type Id* | Data Type Name is not required. our system will set the value according to `dataTypeId`.<br>**Example:** `customer` |\n | automationDetails.dataSource | <a href='#introduction-format'>object</a> | Available fields of Data Source according to Data Type.<br>List of fields are from `automationDetails.dataTypeId` | The Automation will be executed with the given automationDetails.dataSource.<br>`dataSource` is required when *automationType* value is `createOrUpdateDataSource`.<br>**Example:** <br>`{`<br>`'customerName'`:`'vasco'`,<br>`'address'`:`'Jakarta'`,<br>`'contact'`:`'$refFlow.phoneNumber'`<br>`}`<br>The value can be set as static value such as: `'Jakarta'`.<br>or set as dynamic value according to `rules.flow` such as : `'$refFlow.phoneNumber'` |\n | rules | <a href='#introduction-format'>object</a> | Object with format according to *dataType* and *automationType*<br> **Format of dataType 'task' and automationType 'webhook' :**<br> `{`<br>`'flow':'flowName'`<br>`}`<br><br> **Format of dataType 'data' and automationType 'webhook' :**<br> `{`<br>`'dataTypeId':'dataTypeId'`<br>`}`<br><br> **Format of dataType 'task' and automationType 'createTask', 'createAssignTask', 'moveTask', 'assignTask', and 'createOrUpdateDataSource' :**<br> `{`<br>`'flow':'flowName',`<br>`'fields': {`<br>&nbsp;&nbsp;`'field-1':'value-1'`<br>&nbsp;&nbsp;`'field-n':'value-n'`<br>&nbsp;&nbsp;`}`<br>`}`<br><br> **Format of dataType 'data' and automationType 'createTask' :**<br> `{`<br>`'dataTypeId':'dataTypeId',`<br>`'fields': {`<br>&nbsp;&nbsp;`'field-1':'value-1'`<br>&nbsp;&nbsp;`'field-n':'value-n'`<br>&nbsp;&nbsp;`}`<br>`}` |  Act as an automation's criteria. Criteria that must be true to run an Automation <br>  **Example for dataType 'task' and automationType 'webhook'**:<br>`{`<br>`'flow':'Delivery'`<br>`}`<br> **Example for dataType 'data' and automationType 'webhook'**:<br>`{`<br>`'dataTypeId':'644fcd63562387038543fce2'`<br>`}`<br> **Example for dataType 'task' and automationType 'createTask', 'createAssignTask', 'moveTask', 'assignTask', or 'createOrUpdateDataSource'**:<br>`{`<br>`'flow':'Delivery',`<br>`'fields': {`<br>&nbsp;&nbsp;`'name':'velasco'`<br>&nbsp;&nbsp;`'address':'medellin'`<br>&nbsp;&nbsp;`}`<br>`}`<br> **Example for dataType 'data' and automationType 'createTask'**:<br>`{`<br>`'dataTypeId':'644fcd63562387038543fce2',`<br>`'fields': {`<br>&nbsp;&nbsp;`'name':'velasco'`<br>&nbsp;&nbsp;`'address':'medellin'`<br>&nbsp;&nbsp;`}`<br>`}` |\n | rules.flow | <a href='#introduction-format'>string</a> | *Available Flow on organization* | FlowName to select specific task for event to happens.<br>Use <a href='#Setting_Flow'>GET /flows API</a> to get the list of Flow.<br>`flow` is required for **dataType is task and all automationType value**.<br>**Example:** `Pickup`  |\n | rules.dataTypeId | <a href='#introduction-format'>string</a> | *Available DataType on organization* | DataTypeId to select specific data source for event to happens.<br>Use <a href='#Data_DataType'>GET /data-types API</a> to get the list of Data Type.<br>`dataTypeId` is required for **dataType is data and automationType is createTask, webhook value**.<br>**Example:** `644fcd63562387038543fce2` |\n | rules.fields | <a href='#introduction-format'>object</a> | Object with format according to *dataType* <br><br>**Format of dataType 'task' :** <br> Available fields of Flow.<br>List of fields is from `rules.flow`<br><br>**Format of dataType 'data' :** <br> Available fields of Data Type.<br>List of fields is from `rules.dataTypeId` | **Example for dataType 'task'** <br> Additional automation's filter. <br>Use <a href='#Setting_Flow'>GET /flow-fields API</a> to get the list of structure data.<br>`fields` is required for **all automationType value except `webhook`**.<br>**Example:** <br>`{`<br>`'name'`:`'roger'`,<br>`'address'`:`'kemayoran'`<br>`}` <br><br> **Example for dataType 'data'** <br> Use <a href='#Data_DataType'>GET /data-types API</a> to get the list of structure data.<br>`fields` is required for **automationType is `createTask`**.<br>**Example:** <br>`{`<br>`'name'`:`'roger'`,<br>`'address'`:`'kemayoran'`<br>`}` |\n | isDeleted | <a href='#introduction-format'>boolean</a>  |  | Has the value `true` if the automation was deleted.<br>Has the value `false` when automation still exist.<br>**Default:** `false` |\n | updatedTime | <a href='#introduction-format'>datetime</a> | `Y-m-d\\TH:i:s.vP` | Time at which the automation was updated.<br>**Example:** `2022-10-07T03:00:58.623000Z`|\n | createdTime | <a href='#introduction-format'>datetime</a> | `Y-m-d\\TH:i:s.vP` | Time at which the automation was created.<br>**Example:** `2022-10-07T03:00:58.623000Z`|\n \n"
  },
  "host": "apiweb.mile.app",
  "basePath": "/api/v3",
  "securityDefinitions": {
    "AccessToken": {
      "type": "apiKey",
      "name": "Authorization",
      "in": "header"
    }
  },
  "schemes": [
    "https"
  ],
  "consumes": [
    "application/json"
  ],
  "produces": [
    "application/json"
  ],
  "paths": {
    "/automations": {
      "get": {
        "summary": "Read automation",
        "tags": [
          "Automation"
        ],
        "operationId": "automation",
        "deprecated": false,
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "$ref" : "#/parameters/pageInQuery"
          },
          {
            "$ref" : "#/parameters/limitInQuery"
          },
          {
            "name": "q",
            "in": "query",
            "required": false,
            "type": "string",
            "description": "Query param search. This field will search automation according to similar value of name, automation type or flow<br>**Example:** `Automation Tigaraksa, createTask, Delivery`"
          },
          {
            "name": "sortBy",
            "in": "query",
            "required": false,
            "type": "string",
            "description": "sortBy is used to sort the result-set in ascending or descending order according to selected field. The value of this param is one of available fields on automation objects.<br>**Example:** `name`, `flow`, `automationType`, `createdTime`, etc.<br>**Default:** `createdTime`"
          },
          {
            "name": "sortOrder",
            "in": "query",
            "required": false,
            "type": "string",
            "description": "sortOrder is to decide ascending or descending order<br>**Example:** `asc` or `desc`.<br>**Default:** `desc`"
          },
          {
            "name": "fields",
            "in": "query",
            "required": false,
            "type": "string",
            "description": "Fields is for selecting the specific fields that you can choose by multiples to show in the response using a string with a comma delimiter.<br>**Example:** `name,automationType,flow`."
          },
          {
            "name": "event",
            "in": "query",
            "required": false,
            "type": "string",
            "description": "Act as a trigger that start an automation.<br>**Example:** `onTaskCreated`"
          },
          {
            "name": "automationType",
            "in": "query",
            "required": false,
            "type": "string",
            "description": "Automation's type. The action of automation.<br>**Example:** `webhook`."
          },
          {
            "name": "dataType",
            "in": "query",
            "required": false,
            "type": "string",
            "description": "Automation's data type.<br>**Example:** `task`."
          },
          {
            "name": "flow",
            "in": "query",
            "required": false,
            "type": "string",
            "description": "FlowName to select specific task for event to happens. Use <a href='#tag/Flow'>GET /flows API</a> to get the list of Flow.<br>**Example:** `Pickup`"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "type": "object",
              "title": "NetworkReadResponse",
              "properties": {
                "status": {
                  "description": "Status of response.",
                  "type": "boolean"
                },
                "message": {
                  "description": "Message of API response.",
                  "type": "string"
                },
                "data": {
                  "description": "List of object automation.",
                  "type": "object"
                }
              },
              "example": {
                "status": true,
                "message": "Success",
                "data": {
                  "current_page": 1,
                  "data": [
                    {
                      "name": "Auto webhook automation",
                      "event": "onTaskFinished",
                      "automationType": "webhook",
                      "dataType": "task",
                      "automationDetails": {
                        "url": "https://apiweb.mile.app/webhook",
                        "headers": {
                          "x-api-key": "1234e98498ce07d29474a7ev2",
                          "org": "general"
                        }
                      },
                      "rules": {
                        "flow": "Pickup", 
                        "flowId": "667b712f63020e5f182f0cb2"
                      },
                      "organizationId": "621dd813eb3ebf16b94dbde3",
                      "isActive": true,
                      "updatedTime": "2022-07-13T03:16:40+00:00",
                      "createdTime": "2022-07-13T03:16:40+00:00",
                      "_id": "62ce3918d3f3e1681a3a54b5"
                    }
                  ],
                  "first_page_url": "http://apiweb.mile.app/api/v3/automations?q=automation%201&page=1",
                  "from": 1,
                  "last_page": 1,
                  "last_page_url": "http://apiweb.mile.app/api/v3/automations?q=automation%201&page=1",
                  "links": [
                    {
                      "url": null,
                      "label": "&laquo; Previous",
                      "active": false
                    },
                    {
                      "url": "http://apiweb.mile.app/api/v3/automations?q=automation%201&page=1",
                      "label": "1",
                      "active": true
                    },
                    {
                      "url": null,
                      "label": "Next &raquo;",
                      "active": false
                    }
                  ],
                  "next_page_url": null,
                  "path": "http://apiweb.mile.app/api/v3/automations",
                  "per_page": 10,
                  "prev_page_url": null,
                  "to": 1,
                  "total": 1
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "schema": {
              "$ref": "#/parameters/responses/badRequest/schema"
            },
            "examples": {
                "application/json": {
                    "status": false,
                    "message": "#/parameters/descriptions/messageResponse",
                    "failedCode": "auto-001"
                }
            }
            
          },
          "500": {
            "description": "Server error",
            "schema": {
              "$ref": "#/parameters/responses/serverError/schema"
            },
            "examples": {
                "application/json": {
                    "status": false,
                    "message": "Internal server error",
                    "failedCode": "auto-045"
                }
            }
          }
        },
        "security": [
          {
            "AccessToken": []
          }
        ]
      }
    },
    "/automation-log": {
      "get": {
        "summary": "Read log automation",
        "tags": [
          "Automation"
        ],
        "operationId": "getAutomationLog",
        "deprecated": false,
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "limit",
            "in": "query",
            "required": false,
            "type": "string",
            "description": "Limit of automation logs list.<br>**Example:** `20`.<br>**Default:** `10`"
          },
          {
            "name": "page",
            "in": "query",
            "required": false,
            "type": "integer",
            "format": "int32",
            "description": "Pagination of automation logs list.<br>**Example:** `2`.<br>**Default:** `1`"
          },
          {
            "name": "sortBy",
            "in": "query",
            "required": false,
            "type": "string",
            "description": "sortBy is used to sort the result-set in ascending or descending order according to selected field. The value of this param is one of available fields on automation objects.<br>**Default:** `@timestamp`"
          },
          {
            "name": "sortOrder",
            "in": "query",
            "required": false,
            "type": "string",
            "description": "sortOrder is to decide ascending or descending order<br>**Example:** `asc` or `desc`.<br>**Default:** `desc`"
          },
          {
            "name": "startDate",
            "in": "query",
            "required": false,
            "type": "string",
            "description": "startDate & endDate is used to select range of time of automation log.<br>**Example:** `2022-08-10`"
          },
          {
            "name": "endDate",
            "in": "query",
            "required": false,
            "type": "string",
            "description": "startDate & endDate is used to select range of time of automation log.<br>**Example:** `2022-08-10`"
          },
          {
            "name": "taskId",
            "in": "query",
            "required": false,
            "type": "string",
            "description": "The identifier for Task that generated by system. Use <a href='#tag/Task'>GET /tasks API</a> to get the list of Task IDs.<br>**Example:** `621dd813xy3ebf16b94d6969`"
          },
          {
            "name": "automationId",
            "in": "query",
            "required": false,
            "type": "string",
            "description": "The identifier for Automation that generated by system. Use <a href='#tag/Automation'>GET /automations API</a> to get the list of Automation IDs.<br>**Example:** `621dd813xy3ebf16b87d6969`"
          },
          {
            "name": "isSuccess",
            "in": "query",
            "required": false,
            "type": "boolean",
            "description": "for selecting automation log of success or failed, acceptable value:true,false. leave it empty if you want to get all data.<br>**Example:** `true`"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "type": "object",
              "title": "NetworkLogResponse",
              "properties": {
                "status": {
                  "description": "Status of response.",
                  "type": "boolean"
                },
                "message": {
                  "description": "Message of API response.",
                  "type": "string"
                },
                "total": {
                  "type": "integer",
                  "description": "Total data of automation logs."
                },
                "data": {
                  "description": "List of automation logs object.",
                  "type": "array",
                  "items": {
                    "type": "object"
                  }
                },
                "params": {
                  "type": "object",
                  "description": "Params of automation logs."
                }
              },
              "example": {
                "status": true,
                "message": "elasticData",
                "total": 1,
                "data": [
                  {
                    "_index": "log-automationdev-2022.08.10",
                    "_type": "_doc",
                    "_id": "-DethoIBewA7zVXNTstW",
                    "_score": null,
                    "_source": {
                      "finishRequestTime": "2022-08-10 07:34:31",
                      "automationEvent": "onTaskCreated",
                      "attempt": "0",
                      "automationId": "62f25ada1c0cd810800157c2",
                      "timestamp": "2022-08-10 07:34:31",
                      "name": "automation log",
                      "response": "{\"status\":true,\"code\":201,\"message\":\"Task has been created\",\"task\":{\"createdFrom\":\"Automation\",\"flow\":\"Test Flow Import Visit\",\"startTime\":\"2022-08-09T13:02:48+00:00\",\"endTime\":\"2022-08-10T13:02:48+00:00\",\"hubId\":\"622976f50b8db203ef31d312\",\"input4\":\"08:00\",\"input9\":0,\"input3\":\"123,234\",\"input2\":\"malang\",\"input5\":\"17:00\",\"input6\":0,\"input8\":0,\"input1\":\"dendi\",\"select1\":null,\"title\":\"dendi\",\"content\":\"malang\",\"geoLock\":[{\"geoLocation\":\"123,234\",\"radius\":null}],\"useGeoLock\":false,\"geoLockTrigger\":null,\"flowId\":\"625678f90fc8ba02bb5eb432\",\"organizationId\":\"621dd813eb3ebf16b94dbde3\",\"status\":\"UNASSIGNED\",\"hub\":{\"_id\":\"622976f50b8db203ef31d312\",\"name\":\"JAKARTA\",\"lat\":-6.174739001608504,\"lng\":106.79002412883601},\"orderIndex\":166011687171396,\"createdBy\":null,\"updatedTime\":\"2022-08-10T07:34:31+00:00\",\"createdTime\":\"2022-08-10T07:34:31+00:00\",\"_id\":\"62f35f8710bf27537c61d1c2\"}}",
                      "automationUrl": "/api/v3/task",
                      "automationDetails": "{\"taskData\":{\"input9\":null,\"input8\":null,\"select1\":null,\"input6\":null,\"input5\":null,\"input4\":null,\"input3\":\"123,234\",\"input2\":\"malang\",\"input1\":\"$refFlow.title\"},\"flow\":\"Test Flow Import Visit\"}",
                      "severity": "NOTICE",
                      "statusCode": "201",
                      "startRequestTime": "2022-08-10 07:34:31.6996",
                      "delayTime": "1660114849.699626",
                      "automationName": "automation log",
                      "@timestamp": "2022-08-10T07:34:34.873Z",
                      "request": "{\"createdFrom\":\"Automation\",\"flow\":\"Test Flow Import Visit\",\"startTime\":\"2022-08-09T13:02:48.000000Z\",\"endTime\":\"2022-08-10T13:02:48.000000Z\",\"hubId\":\"622976f50b8db203ef31d312\",\"input4\":null,\"input9\":null,\"input3\":\"123,234\",\"input2\":\"malang\",\"input5\":null,\"input6\":null,\"input8\":null,\"input1\":\"dendi\",\"select1\":null}",
                      "dispatchAt": "2022-08-10 07:34:31",
                      "dataType": "task",
                      "env": "dev",
                      "organizationId": "621dd813eb3ebf16b94dbde3",
                      "isSuccess": "true",
                      "@version": "1",
                      "referenceId": "62f25af61c0cd810800157c3",
                      "responseTime": "0.04303693771362305",
                      "automationType": "createTask"
                    },
                    "sort": [
                      1660116874873
                    ]
                  }
                ],
                "params": {
                  "from": 0,
                  "size": 10,
                  "query": {
                    "bool": {
                      "must": [
                        {
                          "term": {
                            "organizationId.keyword": "621dd813eb3ebf16b94dbde3"
                          }
                        },
                        {
                          "term": {
                            "automationId.keyword": "62f25ada1c0cd810800157c2"
                          }
                        }
                      ]
                    }
                  },
                  "sort": [
                    {
                      "@timestamp": {
                        "order": "desc"
                      }
                    }
                  ]
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "schema": {
              "$ref": "#/parameters/responses/badRequest/schema"
            },
            "examples": {
                "application/json": {
                    "status": false,
                    "message": "#/parameters/descriptions/messageResponse",
                    "failedCode": "auto-001"
                }
            }
          },
          "500": {
            "description": "Server error",
            "schema": {
              "$ref": "#/parameters/responses/serverError/schema"
            },
            "examples": {
                "application/json": {
                    "status": false,
                    "message": "Internal server error",
                    "failedCode": "auto-045"
                }
            }
          }
        },
        "security": [
          {
            "AccessToken": []
          }
        ]
      }
    },
    "/automation/{automationId}": {
      "get": {
        "summary": "Read automation by ID",
        "tags": [
          "Automation"
        ],
        "operationId": "automation/id1",
        "deprecated": false,
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "automation_id",
            "in": "path",
            "required": true,
            "type": "string",
            "description": "Unique identifier for automation that generated by system.<br>**Example**: `62ce3918d3f3e1681a3a54b5`"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "type": "object",
              "title": "NetworkReadIDResponse",
              "properties": {
                "status": {
                  "description": "Status of response.",
                  "type": "boolean"
                },
                "message": {
                  "description": "Message of API response.",
                  "type": "string"
                },
                "data": {
                  "description": "Detail of object automation.",
                  "type": "object"
                }
              },
              "example": {
                "status": true,
                "message": "Success",
                "data": {
                  "name": "Auto webhook automation",
                  "event": "onTaskFinished",
                  "automationType": "webhook",
                  "dataType": "task",
                  "automationDetails": {
                    "url": "https://apiweb.mile.app/webhook",
                    "headers": {
                      "x-api-key": "1234e98498ce07d29474a7ev2",
                      "org": "general"
                    }
                  },
                  "rules": {
                    "flow": "Pickup",
                    "flowId": "667b712f63020e5f182f0cb2"
                  },
                  "organizationId": "621dd813eb3ebf16b94dbde3",
                  "isActive": true,
                  "updatedTime": "2022-07-13T03:16:40+00:00",
                  "createdTime": "2022-07-13T03:16:40+00:00",
                  "_id": "62ce3918d3f3e1681a3a54b5"
                }
              }
            }
          },
          "404": {
            "description": "Data not found",
            "schema": {
              "$ref": "#/parameters/responses/notFound/schema"
            }
          },
          "500": {
            "description": "Server error",
            "schema": {
              "$ref": "#/parameters/responses/serverError/schema"
            },
            "examples": {
                "application/json": {
                    "status": false,
                    "message": "Internal server error",
                    "failedCode": "auto-045"
                }
            }
          }
        },
        "security": [
          {
            "AccessToken": []
          }
        ]
      }
    },
    "/automation": {
      "post": {
        "summary": "Create automation",
        "tags": [
          "Automation"
        ],
        "operationId": "CreateAutomationTypeCreateTask",
        "deprecated": false,
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "Body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/BaseBodyAutomation"
            },
            "x-examples": {
              "application/json": {
                "createTask": {
                  "summary": "Create task automation",
                  "value": {
                    "name": "Create task automation",
                    "event": "onTaskFinished",
                    "automationType": "createTask",
                    "dataType": "task",
                    "automationDetails": {
                      "flow": "Delivery",
                      "flowId": "667b75b29edc36517c609ac2",
                      "taskData": {
                        "customerName": "vasco",
                        "address": "Jakarta",
                        "description": "$refFlow.name"
                      }
                    },
                    "rules": {
                      "flow": "Pickup",
                      "flowId": "667b712f63020e5f182f0cb2",
                      "fields": {
                        "name": "roger",
                        "address": "kemayoran"
                      }
                    }
                  }
                },
                "createAssignTask": {
                  "summary": "Create and assign automation",
                  "value": {
                    "name": "Create and assign automation",
                    "event": "onTaskFinished",
                    "automationType": "createAssignTask",
                    "dataType": "task",
                    "automationDetails": {
                      "flow": "Delivery",
                      "flowId": "667b75b29edc36517c609ac2",
                      "hubId": "634e98498ce07d29474a7e29",
                      "assignee": [
                        "roberto@mile.app"
                      ],
                      "taskData": {
                        "customerName": "Da Gama",
                        "address": "Jakarta",
                        "description": "$refFlow.name"
                      }
                    },
                    "rules": {
                      "flow": "Pickup",
                      "flowId": "667b712f63020e5f182f0cb2",
                      "fields": {
                        "name": "gaban",
                        "address": "pejaten"
                      }
                    }
                  }
                },
                "moveTask": {
                  "summary": "Move task automation",
                  "value": {
                    "name": "Move task automation",
                    "event": "onTaskCreated",
                    "automationType": "moveTask",
                    "dataType": "task",
                    "automationDetails": {
                      "hubId": "634e98498ce07d29474a7e29"
                    },
                    "rules": {
                      "flow": "Pickup",
                      "flowId": "667b712f63020e5f182f0cb2",
                      "fields": {
                        "name": "sam",
                        "address": "pulogadung"
                      }
                    }
                  }
                },
                "assignTask": {
                  "summary": "Assign task automation",
                  "value": {
                    "name": "Assign task automation",
                    "event": "onTaskCreated",
                    "automationType": "assignTask",
                    "dataType": "task",
                    "automationDetails": {
                      "hubId": "634e98498ce07d29474a7e29",
                      "assignee": [
                        "roberto@mile.app"
                      ]
                    },
                    "rules": {
                      "flow": "Pickup",
                      "flowId": "667b712f63020e5f182f0cb2",
                      "fields": {
                        "name": "bams",
                        "address": "bogor"
                      }
                    }
                  }
                },
                "webhook": {
                  "summary": "Webhook automation",
                  "value": {
                    "name": "Webhook automation",
                    "event": "onTaskFinished",
                    "automationType": "webhook",
                    "dataType": "task",
                    "automationDetails": {
                      "url": "https://apiweb.mile.app/webhook",
                      "headers": {
                        "x-api-key": "1234e98498ce07d29474a7ev2",
                        "org": "general"
                      }
                    },
                    "rules": {
                      "flow": "Pickup",
                      "flowId": "667b712f63020e5f182f0cb2"
                    }
                  }
                },
                "createOrUpdateDataSource": {
                  "summary": "Update datasource automation",
                  "value": {
                    "name": "Update datasource automation",
                    "event": "onTaskFinished",
                    "automationType": "createOrUpdateDataSource",
                    "dataType": "task",
                    "automationDetails": {
                      "dataTypeId": "644fcd63562387038543fce2",
                      "dataId": "$refFlow.pickupNumber",
                      "dataSource": {
                        "customerName": "vasco",
                        "address": "jakarta",
                        "contact": "$refFlow.phoneNumber"
                      }
                    },
                    "rules": {
                      "flow": "Pickup",
                      "flowId": "667b712f63020e5f182f0cb2",
                      "fields": {
                        "name": "sam",
                        "address": "pulogadung"
                      }
                    }
                  }
                },
                "createDataSource": {
                  "summary": "Create task automation on data source created",
                  "value": {
                    "name": "Create task automation on data source created",
                    "event": "onDataSourceCreated",
                    "automationType": "createTask",
                    "dataType": "data",
                    "automationDetails": {
                      "flow": "Delivery",
                      "flowId": "667b75b29edc36517c609ac2",
                      "taskData": {
                        "customerName": "vasco",
                        "address": "Jakarta",
                        "description": "$refData.name"
                      }
                    },
                    "rules": {
                      "dataTypeId": "644fcd63562387038543fce2",
                      "fields": {
                        "name": "roger",
                        "address": "kemayoran"
                      }
                    }
                  }
                },
                "webhookDataSource": {
                  "summary": "Webhook automation on data source created",
                  "value": {
                    "name": "Webhook automation on data source created",
                    "event": "onDataSourceCreated",
                    "automationType": "webhook",
                    "dataType": "data",
                    "automationDetails": {
                      "url": "https://apiweb.mile.app/webhook",
                      "headers": {
                        "x-api-key": "1234e98498ce07d29474a7ev2",
                        "org": "general"
                      }
                    },
                    "rules": {
                      "dataTypeId": "644fcd63562387038543fce2"
                    }
                  }
                },
                "notificationChannelWhatsApp": {
                  "summary": "Notification WhatsApp on task created",
                  "value": {
                    "name": "Notification WhatsApp on task created",
                    "event": "onTaskCreated",
                    "automationType": "notification",
                    "dataType": "task",
                    "automationDetails": {
                      "channel": "whatsApp",
                      "taskFieldReceiver": "customerNumber",
                      "secretKey": "`wWbN#T!_UTATzFRXrd@X",
                      "message": "Greeting, we are from {organization_name} and will be delivering to your location. Track your delivery here {link}. Thank you"
                    },
                    "rules": {
                      "fields": {
                        "statusPickup": "success"
                      },
                      "flow": "Pickup", 
                      "flowId": "667b712f63020e5f182f0cb2"
                    }
                  }
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "description": "Status of response.",
                  "type": "boolean"
                },
                "message": {
                  "description": "Message of API response.",
                  "type": "string"
                },
                "data": {
                  "description": "Detail of object automation.",
                  "type": "object"
                }
              }
            },
            "examples": {
              "application/json": {
                "status": true,
                "message": "Success",
                "data": {
                  "name": "Auto create task automation",
                  "event": "onTaskFinished",
                  "automationType": "createTask",
                  "dataType": "task",
                  "automationDetails": {
                    "flow": "Delivery",
                    "flowId": "667b75b29edc36517c609ac2",
                    "taskData": {
                      "customerName": "vasco",
                      "address": "Jakarta",
                      "description": "$refFlow.name"
                    }
                  },
                  "rules": {
                    "flow": "Pickup",
                    "flowId": "667b712f63020e5f182f0cb2",
                    "fields": {
                      "name": "roger",
                      "address": "kemayoran"
                    }
                  },
                  "organizationId": "621dd813eb3ebf16b94dbde3",
                  "isActive": true,
                  "updatedTime": "2022-07-13T03:16:40+00:00",
                  "createdTime": "2022-07-13T03:16:40+00:00",
                  "_id": "62ce3918d3f3e1681a3a54b1"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "schema": {
              "$ref": "#/parameters/responses/badRequest/schema"
            },
            "examples": {
                "application/json": {
                    "status": false,
                    "message": "#/parameters/descriptions/messageResponse",
                    "failedCode": "auto-001"
                }
            }
          },
          "500": {
            "description": "Server error",
            "schema": {
              "$ref": "#/parameters/responses/serverError/schema"
            },
            "examples": {
                "application/json": {
                    "status": false,
                    "message": "Internal server error",
                    "failedCode": "auto-045"
                }
            }
          }
        },
        "security": [
          {
            "AccessToken": []
          }
        ]
      }
    },
    "/automation-retries": {
      "post": {
        "summary": "Retry bulk automation",
        "tags": [
          "Automation"
        ],
        "operationId": "automationRetries",
        "deprecated": false,
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "Body",
            "in": "body",
            "schema": {
              "$ref": "#/definitions/bulk-retries"
            }
          }
        ],
        "description": "This endpoint is only used with tokens from internal accounts, for example, accounts using @mile.app or @paket.id",
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "type": "object",
              "properties": {
                "status": {
                  "description": "Status of response.",
                  "type": "string"
                },
                "message": {
                  "description": "Message of API response.",
                  "type": "string"
                },
                "data": {
                  "description": "List of success syncronize id.",
                  "type": "array"
                }
              },
              "example": {
                "status": true,
                "message": "Success.",
                "data": {
                    "total": 2,
                    "success": 2,
                    "failed": 0,
                    "details": {
                        "wCixuZABO6Fu1BKEElvp": "Success.",
                        "EyyyuZABO6Fu1BKE6hZB": "Success."
                    }
                }
            }
            }
          },
          "400": {
            "description": "Bad Request",
            "schema": {
              "$ref": "#/parameters/responses/badRequest/schema"
            },
            "examples": {
                "application/json": {
                    "status": false,
                    "message": "#/parameters/descriptions/messageResponse",
                    "failedCode": "auto-001"
                }
            }
          },
          "500": {
            "description": "Server error",
            "schema": {
              "$ref": "#/parameters/responses/serverError/schema"
            },
            "examples": {
                "application/json": {
                    "status": false,
                    "message": "Internal server error",
                    "failedCode": "auto-045"
                }
            }
          }
        },
        "security": [
          {
            "AccessToken": []
          }
        ]
      }
    },
    "/automation/{automation_id}": {
      "put": {
        "summary": "Update automation by ID",
        "tags": [
          "Automation"
        ],
        "operationId": "UpdateAutomation/id",
        "deprecated": false,
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "automation_id",
            "in": "path",
            "required": true,
            "type": "string",
            "description": "Unique identifier for automation that generated by system.<br>**Example**: `62ce3918d3f3e1681a3a54b5`"
          },
          {
            "name": "Body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/BaseBodyAutomation"
            },
            "x-examples": {
              "application/json": {
                "createTask": {
                  "summary": "Create task automation",
                  "value": {
                    "name": "Create task automation",
                    "event": "onTaskFinished",
                    "automationType": "createTask",
                    "dataType": "task",
                    "automationDetails": {
                      "flow": "Delivery",
                      "flowId": "667b75b29edc36517c609ac2",
                      "taskData": {
                        "customerName": "vasco",
                        "address": "Jakarta",
                        "description": "$refFlow.name"
                      }
                    },
                    "rules": {
                      "flow": "Pickup",
                      "flowId": "667b712f63020e5f182f0cb2",
                      "fields": {
                        "name": "roger",
                        "address": "kemayoran"
                      }
                    }
                  }
                },
                "createAssignTask": {
                  "summary": "Create and assign automation",
                  "value": {
                    "name": "Create and assign automation",
                    "event": "onTaskFinished",
                    "automationType": "createAssignTask",
                    "dataType": "task",
                    "automationDetails": {
                      "flow": "Delivery",
                      "flowId": "667b75b29edc36517c609ac2",
                      "hubId": "634e98498ce07d29474a7e29",
                      "assignee": [
                        "roberto@mile.app"
                      ],
                      "taskData": {
                        "customerName": "Da Gama",
                        "address": "Jakarta",
                        "description": "$refFlow.name"
                      }
                    },
                    "rules": {
                      "flow": "Pickup",
                      "flowId": "667b712f63020e5f182f0cb2",
                      "fields": {
                        "name": "gaban",
                        "address": "pejaten"
                      }
                    }
                  }
                },
                "moveTask": {
                  "summary": "Move task automation",
                  "value": {
                    "name": "Move task automation",
                    "event": "onTaskCreated",
                    "automationType": "moveTask",
                    "dataType": "task",
                    "automationDetails": {
                      "hubId": "634e98498ce07d29474a7e29"
                    },
                    "rules": {
                      "flow": "Pickup",
                      "flowId": "667b712f63020e5f182f0cb2",
                      "fields": {
                        "name": "sam",
                        "address": "pulogadung"
                      }
                    }
                  }
                },
                "assignTask": {
                  "summary": "Assign task automation",
                  "value": {
                    "name": "Assign task automation",
                    "event": "onTaskCreated",
                    "automationType": "assignTask",
                    "dataType": "task",
                    "automationDetails": {
                      "hubId": "634e98498ce07d29474a7e29",
                      "assignee": [
                        "roberto@mile.app"
                      ]
                    },
                    "rules": {
                      "flow": "Pickup",
                      "flowId": "667b712f63020e5f182f0cb2",
                      "fields": {
                        "name": "bams",
                        "address": "bogor"
                      }
                    }
                  }
                },
                "webhook": {
                  "summary": "Webhook automation",
                  "value": {
                    "name": "Webhook automation",
                    "event": "onTaskFinished",
                    "automationType": "webhook",
                    "dataType": "task",
                    "automationDetails": {
                      "url": "https://apiweb.mile.app/webhook",
                      "headers": {
                        "x-api-key": "1234e98498ce07d29474a7ev2",
                        "org": "general"
                      }
                    },
                    "rules": {
                      "flow": "Pickup", 
                      "flowId": "667b712f63020e5f182f0cb2"
                    }
                  }
                },
                "createOrUpdateDataSource": {
                  "summary": "Update datasource automation",
                  "value": {
                    "name": "Update datasource automation",
                    "event": "onTaskFinished",
                    "automationType": "createOrUpdateDataSource",
                    "dataType": "task",
                    "automationDetails": {
                      "dataTypeId": "644fcd63562387038543fce2",
                      "dataId": "$refFlow.pickupNumber",
                      "dataSource": {
                        "customerName": "vasco",
                        "address": "jakarta",
                        "contact": "$refFlow.phoneNumber"
                      }
                    },
                    "rules": {
                      "flow": "Pickup",
                      "flowId": "667b712f63020e5f182f0cb2",
                      "fields": {
                        "name": "sam",
                        "address": "pulogadung"
                      }
                    }
                  }
                },
                "createDataSource": {
                  "summary": "Create task automation on data source created",
                  "value": {
                    "name": "Create task automation on data source created",
                    "event": "onDataSourceCreated",
                    "automationType": "createTask",
                    "dataType": "data",
                    "automationDetails": {
                      "flow": "Delivery",
                      "flowId": "667b75b29edc36517c609ac2",
                      "taskData": {
                        "customerName": "vasco",
                        "address": "Jakarta",
                        "description": "$refData.name"
                      }
                    },
                    "rules": {
                      "dataTypeId": "644fcd63562387038543fce2",
                      "fields": {
                        "name": "roger",
                        "address": "kemayoran"
                      }
                    }
                  }
                },
                "webhookDataSource": {
                  "summary": "Webhook automation on data source created",
                  "value": {
                    "name": "Webhook automation on data source created",
                    "event": "onDataSourceCreated",
                    "automationType": "webhook",
                    "dataType": "data",
                    "automationDetails": {
                      "url": "https://apiweb.mile.app/webhook",
                      "headers": {
                        "x-api-key": "1234e98498ce07d29474a7ev2",
                        "org": "general"
                      }
                    },
                    "rules": {
                      "dataTypeId": "644fcd63562387038543fce2"
                    }
                  }
                },                
                "notificationChannelWhatsApp": {
                  "summary": "Notification WhatsApp on task created",
                  "value": {
                    "name": "Notification WhatsApp on task created",
                    "event": "onTaskCreated",
                    "automationType": "notification",
                    "dataType": "task",
                    "automationDetails": {
                      "channel": "whatsApp",
                      "taskFieldReceiver": "customerNumber",
                      "secretKey": "`wWbN#T!_UTATzFRXrd@X",
                      "message": "Greeting, we are from {organization_name} and will be delivering to your location. Track your delivery here {link}. Thank you"
                    },
                    "rules": {
                      "fields": {
                        "statusPickup": "success"
                      },
                      "flow": "Pickup", 
                      "flowId": "667b712f63020e5f182f0cb2"
                    }
                  }
                }
              }
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "type": "object",
              "title": "NetworkCreateResponse",
              "properties": {
                "status": {
                  "description": "Status of response.",
                  "type": "boolean"
                },
                "message": {
                  "description": "Message of API response.",
                  "type": "string"
                },
                "data": {
                  "description": "Detail of object automation.",
                  "type": "object"
                }
              },
              "example": {
                "status": true,
                "message": "Success",
                "data": {
                  "name": "Auto webhook automation",
                  "event": "onTaskFinished",
                  "automationType": "webhook",
                  "dataType": "task",
                  "automationDetails": {
                    "url": "https://apiweb.mile.app/webhook",
                    "headers": {
                      "x-api-key": "1234e98498ce07d29474a7ev2",
                      "org": "global"
                    }
                  },
                  "rules": {
                    "flow": "Pickup", 
                    "flowId": "667b712f63020e5f182f0cb2"
                  },
                  "organizationId": "621dd813eb3ebf16b94dbde3",
                  "isActive": true,
                  "updatedTime": "2022-07-13T03:16:40+00:00",
                  "createdTime": "2022-07-13T03:16:40+00:00",
                  "_id": "62ce3918d3f3e1681a3a54b5"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "schema": {
              "$ref": "#/parameters/responses/badRequest/schema"
            },
            "examples": {
                "application/json": {
                    "status": false,
                    "message": "#/parameters/descriptions/messageResponse",
                    "failedCode": "auto-001"
                }
            }
          },
          "404": {
            "description": "Data not found",
            "schema": {
              "$ref": "#/parameters/responses/notFound/schema"
            }
          },
          "500": {
            "description": "Server error",
            "schema": {
              "$ref": "#/parameters/responses/serverError/schema"
            },
            "examples": {
                "application/json": {
                    "status": false,
                    "message": "Internal server error",
                    "failedCode": "auto-045"
                }
            }
          }
        },
        "security": [
          {
            "AccessToken": []
          }
        ]
      },
      "patch": {
        "summary": "Update partially automation by ID",
        "tags": [
          "Automation"
        ],
        "operationId": "UpdatePartialAutomation/id",
        "deprecated": false,
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "automation_id",
            "in": "path",
            "required": true,
            "type": "string",
            "description": "Unique identifier for automation that generated by system.<br>**Example**: `62ce3918d3f3e1681a3a54b5`"
          },
          {
            "name": "Body",
            "in": "body",
            "required": true,
            "schema": {
              "$ref": "#/definitions/PATCHAutomationRequest"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "type": "object",
              "title": "NetworkPatchResponse",
              "properties": {
                "status": {
                  "description": "Status of response.",
                  "type": "boolean"
                },
                "message": {
                  "description": "Message of API response.",
                  "type": "string"
                },
                "data": {
                  "description": "Detail of object automation.",
                  "type": "object"
                }
              },
              "example": {
                "status": true,
                "message": "Success",
                "data": {
                  "name": "Auto webhook automation",
                  "event": "onTaskFinished",
                  "automationType": "webhook",
                  "dataType": "task",
                  "automationDetails": {
                    "url": "https://apiweb.mile.app/webhook",
                    "headers": {
                      "x-api-key": "1234e98498ce07d29474a7ev2",
                      "org": "global"
                    }
                  },
                  "rules": {
                    "flow": "Pickup", 
                    "flowId": "667b712f63020e5f182f0cb2"
                  },
                  "organizationId": "621dd813eb3ebf16b94dbde3",
                  "isActive": false,
                  "updatedTime": "2022-07-13T03:16:40+00:00",
                  "createdTime": "2022-07-13T03:16:40+00:00",
                  "_id": "62ce3918d3f3e1681a3a54b5"
                }
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "schema": {
              "$ref": "#/parameters/responses/badRequest/schema"
            },
            "examples": {
                "application/json": {
                    "status": false,
                    "message": "#/parameters/descriptions/messageResponse",
                    "failedCode": "auto-001"
                }
            }
          },
          "404": {
            "description": "Data not found",
            "schema": {
              "$ref": "#/parameters/responses/notFound/schema"
            }
          },
          "500": {
            "description": "Server error",
            "schema": {
              "$ref": "#/parameters/responses/serverError/schema"
            },
            "examples": {
                "application/json": {
                    "status": false,
                    "message": "Internal server error",
                    "failedCode": "auto-045"
                }
            }
          }
        },
        "security": [
          {
            "AccessToken": []
          }
        ]
      }
    },
    "/automation-retry/{log_id}": {
      "patch": {
        "summary": "Retry automation by ID",
        "tags": [
          "Automation"
        ],
        "operationId": "patchAutomationRetry",
        "deprecated": false,
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "log_id",
            "in": "path",
            "required": true,
            "type": "string",
            "description": "Unique identifier for automation log that generated by system.<br>**Example**: `62f35f8710bf27537c61d1c2`"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "type": "object",
              "title": "NetworkRetryResponse",
              "properties": {
                "status": {
                  "description": "Status of response.",
                  "type": "boolean"
                },
                "message": {
                  "description": "Message of API response.",
                  "type": "string"
                }
              },
              "example": {
                "status": true,
                "message": "automation retry has been executed"
              }
            }
          },
          "400": {
            "description": "Bad Request",
            "schema": {
              "$ref": "#/parameters/responses/badRequest/schema"
            },
            "examples": {
                "application/json": {
                    "status": false,
                    "message": "#/parameters/descriptions/messageResponse",
                    "failedCode": "auto-001"
                }
            }
          },
          "404": {
            "description": "Data not found",
            "schema": {
              "$ref": "#/parameters/responses/notFound/schema"
            },
            "examples": {
                "application/json": {
                    "status": false,
                    "message": "#/parameters/descriptions/messageResponse",
                    "failedCode": "auto-033"
                }
            }
          },
          "500": {
            "description": "Server error",
            "schema": {
              "$ref": "#/parameters/responses/serverError/schema"
            },
            "examples": {
                "application/json": {
                    "status": false,
                    "message": "Internal server error",
                    "failedCode": "auto-045"
                }
            }
          }
        },
        "security": [
          {
            "AccessToken": []
          }
        ]
      }
    },
    "/automation/{automation_id}/": {
      "delete": {
        "summary": "Delete automation by ID",
        "tags": [
          "Automation"
        ],
        "operationId": "Deleteautomation/id",
        "deprecated": false,
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "automation_id",
            "in": "path",
            "required": true,
            "type": "string",
            "description": "Unique identifier for automation that generated by system.<br>**Example**: `62ce3918d3f3e1681a3a54b5`"
          }
        ],
        "responses": {
          "200": {
            "description": "Success",
            "schema": {
              "type": "object",
              "title": "NetworkDeleteResponse",
              "properties": {
                "status": {
                  "description": "Status of response.",
                  "type": "boolean"
                },
                "message": {
                  "description": "Message of API response.",
                  "type": "string"
                },
                "_id": {
                  "description": "ID of deleted automation.",
                  "type": "string"
                }
              },
              "example": {
                "status": true,
                "message": "Automation successfully deleted.",
                "_id": "62ce3918d3f3e1681a3a54b5"
              }
            }
          },
          "404": {
            "description": "Not Found",
            "schema": {
              "type": "object",
              "title": "NetworkDeleteResponse",
              "properties": {
                "status": {
                  "description": "Status of response.",
                  "type": "boolean"
                },
                "message": {
                  "description": "Message of API response.",
                  "type": "string"
                }
              },
              "example": {
                "status": false,
                "message": "data not found"
              }
            }
          },
          "500": {
            "description": "Server error",
            "schema": {
              "$ref": "#/parameters/responses/serverError/schema"
            },
            "examples": {
                "application/json": {
                    "status": false,
                    "message": "Internal server error",
                    "failedCode": "auto-045"
                }
            }
          }
        },
        "security": [
          {
            "AccessToken": []
          }
        ]
      }
    }
  },
  "definitions": {
    "bulk-retries": {
      "example": {
        "id": [
          "EyyyuZABO6Fu1BKE6hZB",
          "wCixuZABO6Fu1BKEElvp"
        ]
      },
      "type": "object",
      "properties": {
        "id": {
          "type": "array",
          "maxItems": 200,
          "description": "Unique identifier for the data that generated by system. **Example:** `['EyyyuZABO6Fu1BKE6hZB']`"
        }
      },
      "required": [
        "id"
      ]
    },
    "BaseBodyAutomation": {
      "x-discriminator": "automationDetails",
      "type": "object",
      "required": [
        "name",
        "event",
        "automationType"
      ],
      "properties": {
        "name": {
          "type": "string",
          "description": "Automation's name.<br>**Example:** `Auto create task automation`"
        },
        "event": {
          "type": "string",
          "description": "Act as a trigger that start an automation. There are 8 different types. <br> *enum: onTaskCreated, onTaskFinished, onTaskAssigned, onDataSourceCreated, onRoutingResultFinished, onRoutingResultDispatched, onStartTrip, onFinishTrip* <br> **onTaskCreated**: Automation will happen when a task is created. <br> **onTaskFinished**: Automation will happen when a task is finished (status task: Done). <br> **onTaskAssigned**: Automation will happen when a task is assigned to field user(s). <br> **onDataSourceCreated**: Automation will happen when a data source is created. <br> **onRoutingResultFinished**: Automation will happen when a routing created is created. <br> **onRoutingResultDispatched**: Automation will happen when a routing is dispatched. <br> **onStartTrip**: Automation will happen when a start trip is triggered. <br> **onFinishTrip**: Automation will happen when a finish trip is triggered. <br>**Example:** `onTaskFinished`"
        },
        "dataType": {
          "type": "string",
          "description": "Automation's data type. There are 4 different types. <br> *enum: task, data, routingResult, locationHistory* <br> **Default:** `task`"
        },
        "isActive": {
          "type": "string",
          "description": "Automation's active state, only active automation will proceed by system<br>**Default:** `true`"
        },
        "automationType": {
          "type": "string",
          "description": "Automation's type. The changes you want to automate. There are 6 different types: <br>  *enum: createTask, createAssignTask, moveTask, assignTask, webhook, createOrUpdateDataSource, notification* <br> **createTask**: The task will create when an event happens. <br>**Example**: `createTask`"
        }
      }
    },
    "CreateTask": {
      "allOf": [
        {
          "$ref": "#/definitions/BaseBodyAutomation"
        },
        {
          "required": [
            "automationDetails",
            "rules"
          ],
          "properties": {
            "automationDetails": {
              "description": "Set of fields according to the selected automation type. Each automationType have different automationDetails.",
              "type": "array",
              "items": {
                "type": "object",
                "required": [
                  "flow",
                  "flowId",
                  "taskData",
                  "url",
                  "hubId",
                  "assignee",
                  "dataTypeId",
                  "dataId",
                  "dataSource"
                ],
                "properties": {
                  "flow": {
                    "description": "Type of task that will be created when an event happens. Field only exist, if *automationType* is **createTask** and **createAssignTask** <br> **Example:** `Delivery`",
                    "type": "string"
                  },
                  "flowId": {
                    "type": "string",
                    "description": "The Identifier of organization's flow. It required with flow param. Use <a href='#tag/Flow'>Flow /flows API</a> to get the list of flow ids.<br>**Example:** `67be687c128306111e022022`"
                  },
                  "taskData": {
                    "description": "The task will be created with the given data (different flow may have different sets of field). Field only exist, if *automationType* is **createTask** and **createAssignTask** <br>**Example:** <br>`{`<br>`'customerName'`:`'vasco'`,<br>`'address'`:`'Jakarta'`,<br>`'description'`:`'$refFlow.name'`<br>`}`<br>The value can be set as static value such as: `'Jakarta'`.<br>or set as dynamic value according to `rules.flow` such as : `'$refFlow.name'`",
                    "type": "array"
                  },
                  "hubId": {
                    "description": "Unique ID to identify a hub. Field only exist, if *automationType* is **moveTask**,**createAssignTask** and **createTask** if using *event* is **onDataSourceCreated** with data type is common hub. To use a dynamic hub, you can utilize the hubId with the value `$refFlow.hubId` in the **createAssignTask** type. <br> **Example:** `634e98498ce07d29474a7e29`",
                    "type": "string"
                  },
                  "assignee": {
                    "description": "List of username that has been assigned the task. Field only exist, if *automationType* is **assignTask** and **createAssignTask** <br> **Example:** `['roberto@mile.app']`",
                    "type": "array"
                  },
                  "reassignment": {
                    "description": "Type of reassigment that will be auto assign when user created task. Field only exist, if *event* is **onTaskFinished** or **onTaskCreated** and *automationType* is **createAssignTask**. <br> There are 3 types of *reassigment* if *event* is **onTaskFinished** :`assignee`,`assignedBy`,`doneBy`. <br> and there are 2 type of *reassigment* if *event* is **onTaskCreated** :`assignee`,`assignedBy`.  <br> **Example:** `assignee`",
                    "type": "string"
                  },
                  "url": {
                    "description": "Reference link for using webhooks. Field only exist, if *automationType* is **webhook** <br> **Example:** `https://apiweb.mile.app/webhook`",
                    "type": "string"
                  },
                  "headers": {
                    "description": "The key and value will be sent using a webhook. Field only exist, if *automationType* is **webhook** <br> **Example:** `{` <br> `'x-api-key': '1234e98498ce07d29474a7ev2',` <br> `'org': 'general'` <br>`}`",
                    "type": "array"
                  },
                  "dataTypeId": {
                    "description": "The identifier of data type. Field only exist, if *automationType* is **createOrUpdateDataSource** <br> **Example:** `644fcd63562387038543fce2`",
                    "type": "string"
                  },
                  "dataId": {
                    "description": "The identifier of data source. Field only exist, if *automationType* is **createOrUpdateDataSource** <br> **Example:** Value can be set as dynamic values according to the data source that has been mapped with the flow such as : `$refFlow.pickupNumber`",
                    "type": "string"
                  },
                  "dataSource": {
                    "description": "The data source will be created or updated with the given data (different data type id may have different sets of field). Field only exist, if *automationType* is **createOrUpdateDataSource**<br>**Example:** <br>`{`<br>`'customerName'`:`'vasco'`,<br>`'address'`:`'Jakarta'`,<br>`'contact'`:`'$refFlow.phoneNumber'`<br>`}`<br>The value can be set as static value such as: `'Jakarta'`.<br>or set as dynamic value according to `rules.flow` such as : `'$refFlow.phoneNumber'`",
                    "type": "array"
                  },
                  "updateLimitUser": {
                    "type": "boolean",
                    "description": "Configuration to run automation using user limit. If `updateLimitUser` has a value of true, users can execute automation using either 'limitUser' or 'limitType'. And if `updateLimitUser` has a value of false, the automation will run without using a user limit.Field only exist, if *automationType* is **createOrUpdateDataSource**..<br>**Example:** `false`"
                  },
                  "replaceLimitUser": {
                    "type": "boolean",
                    "description": "Configuration to replace the current existing user limit. If `replaceLimitUser` is set to `true`, users can execute automation using either `limitUser` or `limitType`, replacing the existing user limit. If `replaceLimitUser` is set to `false`, the automation will run without modifying the existing user limit. This field only exists if *automationType* is **createOrUpdateDataSource**.<br> Note: `updateLimitUser` and `replaceLimitUser` cannot both be set to `true` at the same time.<br>**Example:** `false`"
                  },
                  "limitUser": {
                    "type": "array",
                    "description": "Data source automation will be created using user restrictions based on user emails in the same organization or can be empty if the data source can be accessed by all users. Field only exist, if *automationType* is **createOrUpdateDataSource** and *updateLimitUser* or *replaceLimitUser* is **true**.<br>**Example:** `['john@gmail.com']`",
                    "items": {
                      "type": "string"
                    }
                  },
                  "limitType": {
                    "type": "string",
                    "description": "Data source automation will be created using user restrictions determined based **assignee**, **assignedBy** and **doneBy** when completing a task. Field only exist, if *automationType* is **createOrUpdateDataSource** and *updateLimitUser* or *replaceLimitUser* is **true**.<br>**Example:** `assignee`"
                  },
                  "channel": {
                    "type": "string",
                    "description": "Field only exist, if *automationType* is **notification**<br>The notification provider using fonnte as third party service.<br> The value must be : whatsapp.<br>**Example:** `whatsapp`"
                  },
                  "taskFieldReceiver": {
                    "type": "string",
                    "description": "Field only exist, if *automationType* is **notification** and chanel selected is whatsapp<br>Reference of task component for get the receiver phone. This Field must be from initial page and component type must be Phone Number.<br> **Example:** `customerPhone`"
                  },
                  "secretKey": {
                    "type": "string",
                    "description": "Field only exist, if *automationType* is **notification** and chanel selected is whatsapp<br>The api key that provided by fonnte after registered an account and link a device as sender phone number.<br>**Example:** `wWbN#T!_UTATzFRXrd@X`"
                  },
                  "message": {
                    "type": "string",
                    "description": "Field only exist, if *automationType* is **notification** and chanel selected is whatsapp<br>Dynamic text that supports the inclusion of variables, It can contain static text and specified variable using `{` and `}` that will be replaced with actual values when the message is sent.<br> Supported Variable : organization_name, link <br> *organization_name: Account Organization Name*. <br> *link: Task tracking link*.<br>**Example:** `Greeting, we are from {organization_name} and will be delivering to your location. Track your delivery here {link}. Thank you`"
                  }
                }
              }
            },
            "rules": {
              "type": "array",
              "description": "Act as an automation's criteria. Criteria that must be true to run an Automation.",
              "items": {
                "type": "object",
                "required": [
                  "flow",
                  "flowId"
                ],
                "properties": {
                  "flow": {
                    "description": "Filter automation by flow. When a task is created/assigned/finished with a specific flow, then the automation will take place.<br>**Example:** `Pickup`",
                    "type": "string"
                  },
                  "flowId": {
                    "type": "string",
                    "description": "The Identifier of organization's flow. It required with flow param. Use <a href='#tag/Flow'>Flow /flows API</a> to get the list of flow ids.<br>**Example:** `67be687c128306111e022022`"
                  },
                  "fields": {
                    "description": "Additional automation's filter. When a task is created/assigned/finished with a specific data, then the automation will take place.<br>**Example:** <br>`{`<br>`'name'`:`'roger'`,<br>`'address'`:`'kemayoran'`<br>`}`",
                    "type": "array"
                  }
                }
              }
            }
          }
        }
      ]
    },
    "CreateAssignTask": {
      "allOf": [
        {
          "$ref": "#/definitions/BaseBodyAutomation"
        },
        {
          "required": [
            "automationDetails",
            "rules"
          ],
          "properties": {
            "automationDetails": {
              "type": "array",
              "description": "Set of fields according to the selected automation type. Each automationType have different automationDetails.",
              "items": {
                "type": "object",
                "required": [
                  "flow",
                  "flowId",
                  "hubId",
                  "assignee",
                  "taskData"
                ],
                "properties": {
                  "flow": {
                    "type": "string",
                    "description": "Type of task that will be created when an event happens. <br> **Example:** `Delivery`"
                  },
                  "flowId": {
                    "type": "string",
                    "description": "The Identifier of organization's flow. It required with flow param. Use <a href='#tag/Flow'>Flow /flows API</a> to get the list of flow ids.<br>**Example:** `67be687c128306111e022022`"
                  },
                  "hubId": {
                    "type": "string",
                    "description": "Hub identifier to define task location when an event happens.<br>Use <a href='#Setting_Hub'>GET /hubs API</a> to get the list of Hub IDs.<br>`hubId` is required when *automationType* value is `moveTask`, `assignTask`, or `createAssignTask`.<br>**Example:** `634e98498ce07d29474a7e29`"
                  },
                  "assignee": {
                    "type": "array",
                    "description": "Worker's email that assigned to the task.<br>One task can be assigned by multiple worker.<br>`assignee` is required when *automationType* value is `assignTask`, or `createAssignTask`.<br>**Example**: `['roberto@mile.app']`"
                  },
                  "taskData": {
                    "type": "object",
                    "description": "The task will be created with the given data (different flow may have different sets of field).<br>**Example:** <br>`{`<br>`'customerName'`:`'Da Gama'`,<br>`'address'`:`'Jakarta'`,<br>`'description'`:`'$refFlow.name'`<br>`}`<br>The value can be set as static value such as: `'Jakarta'`.<br>or set as dynamic value according to `rules.flow` such as : `'$refFlow.name'`"
                  }
                }
              }
            },
            "rules": {
              "type": "array",
              "description": "Act as an automation's criteria. Criteria that must be true to run an Automation.",
              "items": {
                "type": "object",
                "required": [
                  "flow",
                  "flowId"
                ],
                "properties": {
                  "flow": {
                    "type": "string",
                    "description": "Filter automation by flow. When a task is created/assigned/finished with a specific flow, then the automation will take place.<br>**Example:** `Pickup`"
                  },
                  "flowId": {
                    "type": "string",
                    "description": "The Identifier of organization's flow. It required with flow param. Use <a href='#tag/Flow'>Flow /flows API</a> to get the list of flow ids.<br>**Example:** `67be687c128306111e022022`"
                  },
                  "fields": {
                    "type": "string",
                    "description": "Additional automation's filter. When a task is created/assigned/finished with a specific data, then the automation will take place.<br>**Example:** <br>`{`<br>`'name'`:`'gaban'`,<br>`'address'`:`'pejaten'`<br>`}`"
                  }
                }
              }
            }
          }
        }
      ]
    },
    "MoveTask": {
      "allOf": [
        {
          "$ref": "#/definitions/BaseBodyAutomation"
        },
        {
          "required": [
            "automationDetails",
            "rules"
          ],
          "properties": {
            "automationDetails": {
              "type": "array",
              "description": "Set of fields according to the selected automation type. Each automationType have different automationDetails.",
              "items": {
                "type": "object",
                "required": [
                  "flow",
                  "hubId",
                  "assignee",
                  "taskData"
                ],
                "properties": {
                  "hubId": {
                    "type": "string",
                    "description": "Hub identifier to define task location when an event happens.<br>Use <a href='#Setting_Hub'>GET /hubs API</a> to get the list of Hub IDs.<br>`hubId` is required when *automationType* value is `moveTask`, `assignTask`, or `createAssignTask`.<br>**Example:** `634e98498ce07d29474a7e29`"
                  }
                }
              }
            },
            "rules": {
              "type": "array",
              "description": "Act as an automation's criteria. Criteria that must be true to run an Automation.",
              "items": {
                "type": "object",
                "required": [
                  "flow",
                  "flowId"
                ],
                "properties": {
                  "flow": {
                    "type": "string",
                    "description": "Filter automation by flow. When a task is created/assigned/finished with a specific flow, then the automation will take place.<br>**Example:** `Pickup`"
                  },
                  "flowId": {
                    "type": "string",
                    "description": "The Identifier of organization's flow. It required with flow param. Use <a href='#tag/Flow'>Flow /flows API</a> to get the list of flow ids.<br>**Example:** `67be687c128306111e022022`"
                  },
                  "fields": {
                    "type": "string",
                    "description": "Additional automation's filter. When a task is created/assigned/finished with a specific data, then the automation will take place.<br>**Example:** <br>`{`<br>`'name'`:`'gaban'`,<br>`'address'`:`'pejaten'`<br>`}`"
                  }
                }
              }
            }
          }
        }
      ]
    },
    "AssignTask": {
      "allOf": [
        {
          "$ref": "#/definitions/BaseBodyAutomation"
        },
        {
          "required": [
            "automationDetails",
            "rules"
          ],
          "properties": {
            "automationDetails": {
              "type": "array",
              "description": "Set of fields according to the selected automation type. Each automationType have different automationDetails.",
              "items": {
                "type": "object",
                "required": [
                  "flow",
                  "hubId",
                  "assignee",
                  "taskData"
                ],
                "properties": {
                  "hubId": {
                    "type": "string",
                    "description": "Hub identifier to define task location when an event happens.<br>Use <a href='#Setting_Hub'>GET /hubs API</a> to get the list of Hub IDs.<br>`hubId` is required when *automationType* value is `moveTask`, `assignTask`, or `createAssignTask`.<br>**Example:** `634e98498ce07d29474a7e29`"
                  },
                  "assignee": {
                    "type": "array",
                    "description": "Worker's email that assigned to the task.<br>One task can be assigned by multiple worker.<br>`assignee` is required when *automationType* value is `assignTask`, or `createAssignTask`.<br>**Example**: `['roberto@mile.app']`"
                  }
                }
              }
            },
            "rules": {
              "type": "array",
              "description": "Act as an automation's criteria. Criteria that must be true to run an Automation.",
              "items": {
                "type": "object",
                "required": [
                  "flow",
                  "flowId"
                ],
                "properties": {
                  "flow": {
                    "type": "string",
                    "description": "Filter automation by flow. When a task is created/assigned/finished with a specific flow, then the automation will take place.<br>**Example:** `Pickup`"
                  },
                  "flowId": {
                    "type": "string",
                    "description": "The Identifier of organization's flow. It required with flow param. Use <a href='#tag/Flow'>Flow /flows API</a> to get the list of flow ids.<br>**Example:** `67be687c128306111e022022`"
                  },
                  "fields": {
                    "type": "string",
                    "description": "Additional automation's filter. When a task is created/assigned/finished with a specific data, then the automation will take place.<br>**Example:** <br>`{`<br>`'name'`:`'gaban'`,<br>`'address'`:`'pejaten'`<br>`}`"
                  }
                }
              }
            }
          }
        }
      ]
    },
    "Webhook": {
      "allOf": [
        {
          "$ref": "#/definitions/BaseBodyAutomation"
        },
        {
          "required": [
            "automationDetails",
            "rules"
          ],
          "properties": {
            "automationDetails": {
              "type": "array",
              "description": "Set of fields according to the selected automation type. Each automationType have different automationDetails.",
              "items": {
                "type": "object",
                "required": [
                  "url"
                ],
                "properties": {
                  "url": {
                    "type": "string",
                    "description": "The address that payloads are sent to.<br>**Example:** `https://apiweb.mile.app/webhook`"
                  },
                  "headers": {
                    "type": "array",
                    "description": "Used to to provide additional information when default headers are not enough then they can use a custom header configuration.<br>`headers` is required when *automationType* value is `webhook`.<br>**Example:**<br>`{`<br>`'x-api-key'`:`'1234e98498ce07d29474a7ev2'`,<br>`'org'`:`'general'`<br>`}`"
                  }
                }
              }
            },
            "rules": {
              "type": "array",
              "description": "Act as an automation's criteria. Criteria that must be true to run an Automation.",
              "items": {
                "type": "object",
                "required": [
                  "flow",
                  "flowId"
                ],
                "properties": {
                  "flow": {
                    "type": "string",
                    "description": "Filter automation by flow. When a task is created/assigned/finished with a specific flow, then the automation will take place.<br>**Example:** `Pickup`"
                  },
                  "flowId": {
                    "type": "string",
                    "description": "The Identifier of organization's flow. It required with flow param. Use <a href='#tag/Flow'>Flow /flows API</a> to get the list of flow ids.<br>**Example:** `67be687c128306111e022022`"
                  }
                }
              }
            }
          }
        }
      ]
    },
    "CreateOrUpdateDataSource": {
      "allOf": [
        {
          "$ref": "#/definitions/BaseBodyAutomation"
        },
        {
          "required": [
            "automationDetails",
            "rules"
          ],
          "properties": {
            "automationDetails": {
              "type": "array",
              "description": "Set of fields according to the selected automation type. Each automationType have different automationDetails.",
              "items": {
                "type": "object",
                "required": [
                  "dataId",
                  "dataTypeId",
                  "dataSource"
                ],
                "properties": {
                  "dataId": {
                    "type": "string",
                    "description": "Data Id to select specific flow's component id format to be executed on automation event.<br>Use <a href='#Setting_Flow'>GET /flow/{flowId} API</a> to get the list of fields's id from Flow.<br>`dataId` is required when *automationType* value is `createOrUpdateDataSource`.<br>**Example:** `$refFlow.pickupNumber` "
                  },
                  "dataTypeId": {
                    "type": "string",
                    "description": "Data Type Id to select specific data source format to be executed on automation event.<br>Use <a href='#Data_DataType'>GET /data-types API</a> to get the list of Data Type.<br>`dataTypeId` is required when *automationType* value is `createOrUpdateDataSource`.<br>**Example:** `644fcd63562387038543fce2`"
                  },
                  "dataTypeName": {
                    "type": "string",
                    "description": "Data Type Name is not required. our system will set the value according to `dataTypeId`.<br>**Example:** `customer`"
                  },
                  "dataSource": {
                    "type": "object",
                    "description": "The Automation will be executed with the given automationDetails.dataSource.<br>`dataSource` is required when *automationType* value is `createOrUpdateDataSource`.<br>**Example:** <br>`{`<br>`'customerName'`:`'vasco'`,<br>`'address'`:`'Jakarta'`,<br>`'contact'`:`'$refFlow.phoneNumber'`<br>`}`<br>The value can be set as static value such as: `'Jakarta'`.<br>or set as dynamic value according to `rules.flow` such as : `'$refFlow.phoneNumber'`"
                  }
                }
              }
            },
            "rules": {
              "type": "array",
              "description": "Act as an automation's criteria. Criteria that must be true to run an Automation.",
              "items": {
                "type": "object",
                "required": [
                  "flow",
                  "flowId"
                ],
                "properties": {
                  "flow": {
                    "type": "string",
                    "description": "Filter automation by flow. When a task is created/assigned/finished with a specific flow, then the automation will take place.<br>**Example:** `Pickup`"
                  },
                  "flowId": {
                    "type": "string",
                    "description": "The Identifier of organization's flow. It required with flow param. Use <a href='#tag/Flow'>Flow /flows API</a> to get the list of flow ids.<br>**Example:** `67be687c128306111e022022`"
                  },
                  "fields": {
                    "type": "string",
                    "description": "Additional automation's filter. When a task is created/assigned/finished with a specific data, then the automation will take place.<br>**Example:** <br>`{`<br>`'name'`:`'gaban'`,<br>`'address'`:`'pejaten'`<br>`}`"
                  }
                }
              }
            }
          }
        }
      ]
    },
    "CreateTaskFromDataSource": {
      "allOf": [
        {
          "$ref": "#/definitions/BaseBodyAutomation"
        },
        {
          "required": [
            "automationDetails",
            "rules"
          ],
          "properties": {
            "automationDetails": {
              "type": "array",
              "description": "Set of fields according to the selected automation type. Each automationType have different automationDetails.",
              "items": {
                "type": "object",
                "required": [
                  "flow",
                  "flowId",
                  "taskData"
                ],
                "properties": {
                  "flow": {
                    "description": "Type of task that will be created when an event happens. <br> **Example:** `Delivery`",
                    "type": "string"
                  },
                  "flowId": {
                    "type": "string",
                    "description": "The Identifier of organization's flow. It required with flow param. Use <a href='#tag/Flow'>Flow /flows API</a> to get the list of flow ids.<br>**Example:** `67be687c128306111e022022`"
                  },
                  "taskData": {
                    "description": "The task will be created with the given data (different flow may have different sets of field).<br>**Example:** <br>`{`<br>`'customerName'`:`'vasco'`,<br>`'address'`:`'Jakarta'`,<br>`'description'`:`'$refFlow.name'`<br>`}`<br>The value can be set as static value such as: `'Jakarta'`.<br>or set as dynamic value according to `rules.flow` such as : `'$refFlow.name'`",
                    "type": "array"
                  }
                }
              }
            },
            "rules": {
              "type": "array",
              "description": "Act as an automation's criteria. Criteria that must be true to run an Automation.",
              "items": {
                "type": "object",
                "required": [
                  "dataTypeId"
                ],
                "properties": {
                  "dataTypeId": {
                    "type": "string",
                    "description": "Filter automation by flow. When a task is created/assigned/finished with a specific flow, then the automation will take place.<br>**Example:** `Pickup`"
                  },
                  "fields": {
                    "type": "string",
                    "description": "Additional automation's filter. When a task is created/assigned/finished with a specific data, then the automation will take place.<br>**Example:** <br>`{`<br>`'name'`:`'gaban'`,<br>`'address'`:`'pejaten'`<br>`}`"
                  }
                }
              }
            }
          }
        }
      ]
    },
    "WebhookDataSuorce": {
      "allOf": [
        {
          "$ref": "#/definitions/BaseBodyAutomation"
        },
        {
          "required": [
            "automationDetails",
            "rules"
          ],
          "properties": {
            "automationDetails": {
              "type": "array",
              "description": "Set of fields according to the selected automation type. Each automationType have different automationDetails.",
              "items": {
                "type": "object",
                "required": [
                  "url"
                ],
                "properties": {
                  "url": {
                    "type": "string",
                    "description": "The address that payloads are sent to.<br>**Example:** `https://apiweb.mile.app/webhook`"
                  },
                  "headers": {
                    "type": "array",
                    "description": "Used to to provide additional information when default headers are not enough then they can use a custom header configuration.<br>`headers` is required when *automationType* value is `webhook`.<br>**Example:**<br>`{`<br>`'x-api-key'`:`'1234e98498ce07d29474a7ev2'`,<br>`'org'`:`'general'`<br>`}`"
                  }
                }
              }
            },
            "rules": {
              "type": "array",
              "description": "Act as an automation's criteria. Criteria that must be true to run an Automation.",
              "items": {
                "type": "object",
                "required": [
                  "dataTypeId"
                ],
                "properties": {
                  "dataTypeId": {
                    "type": "string",
                    "description": "Filter automation by flow. When a task is created/assigned/finished with a specific flow, then the automation will take place.<br>**Example:** `Pickup`"
                  }
                }
              }
            }
          }
        }
      ]
    },
    "NotificationWhatsApp": {
      "allOf": [
        {
          "$ref": "#/definitions/BaseBodyAutomation"
        },
        {
          "required": [
            "automationDetails",
            "rules"
          ],
          "properties": {
            "automationDetails": {
              "type": "array",
              "description": "Set of fields according to the selected automation type. Each automationType have different automationDetails.",
              "items": {
                "type": "object",
                "required": [
                  "url"
                ],
                "properties": {
                  "channel": {
                    "type": "string",
                    "description": "The notification provider using fonnte as third party service.<br> The value must be : whatsapp.<br>**Example:** `whatsapp`"
                  },
                  "taskFieldReceiver": {
                    "type": "string",
                    "description": "Reference of task component for get the receiver phone. This Field must be from initial page and component type must be Phone Number.<br> **Example:** `customerPhone`"
                  },
                  "secretKey": {
                    "type": "string",
                    "description": "The api key that provided by fonnte after registered an account and link a device as sender phone number.<br>**Example:** `wWbN#T!_UTATzFRXrd@X`"
                  },
                  "message": {
                    "type": "string",
                    "description": "Dynamic text that supports the inclusion of variables, It can contain static text and specified variable using `{` and `}` that will be replaced with actual values when the message is sent.<br> Supported Variable : organization_name, link <br> *organization_name: Account Organization Name*. <br> *link: Task tracking link*.<br>**Example:** `Greeting, we are from {organization_name} and will be delivering to your location. Track your delivery here {link}. Thank you`"
                  }
                }
              }
            },
            "rules": {
              "type": "array",
              "description": "Act as an automation's criteria. Criteria that must be true to run an Automation.",
              "items": {
                "type": "object",
                "required": [
                  "flow",
                  "flowId"
                ],
                "properties": {
                  "flow": {
                    "description": "Filter automation by flow. When a task is created/assigned/finished with a specific flow, then the automation will take place.<br>**Example:** `Pickup`",
                    "type": "string"
                  },
                  "flowId": {
                    "type": "string",
                    "description": "The Identifier of organization's flow. It required with flow param. Use <a href='#tag/Flow'>Flow /flows API</a> to get the list of flow ids.<br>**Example:** `67be687c128306111e022022`"
                  },
                  "fields": {
                    "description": "Additional automation's filter. When a task is created/assigned/finished with a specific data, then the automation will take place.<br>**Example:** <br>`{`<br>`'name'`:`'roger'`,<br>`'address'`:`'kemayoran'`<br>`}`",
                    "type": "array"
                  }
                }
              }
            }
          }
        }
      ]
    },
    "POSTAutomationRequestCreateAssign": {
      "title": "POSTAutomationRequestCreateAssign",
      "example": {},
      "type": "object",
      "required": [
        "name",
        "event",
        "automationType",
        "automationDetails",
        "rules"
      ]
    },
    "POSTAutomationRequestMove": {
      "title": "POSTAutomationRequestMove",
      "example": {},
      "type": "object",
      "required": [
        "name",
        "event",
        "automationType",
        "automationDetails",
        "rules"
      ]
    },
    "POSTAutomationRequestAssign": {
      "title": "POSTAutomationRequestAssign",
      "example": {},
      "type": "object",
      "required": [
        "name",
        "event",
        "automationType",
        "automationDetails",
        "rules"
      ]
    },
    "POSTAutomationRequestWebhook": {
      "title": "POSTAutomationRequestWebhook",
      "example": {},
      "type": "object",
      "required": [
        "name",
        "event",
        "automationType",
        "automationDetails",
        "rules"
      ]
    },
    "POSTAutomationRequestCreateOrUpdateDataSource": {
      "title": "POSTAutomationRequestCreateOrUpdateDataSource",
      "example": {},
      "type": "object",
      "required": [
        "name",
        "event",
        "automationType",
        "automationDetails",
        "rules"
      ]
    },
    "POSTAutomationRequestCreateOnCreateDataSource": {
      "title": "POSTAutomationRequestCreateOnCreateDataSource",
      "example": {},
      "type": "object",
      "required": [
        "name",
        "event",
        "automationType",
        "automationDetails",
        "rules"
      ]
    },
    "POSTAutomationRequestWebhookOnCreateDataSource": {
      "title": "POSTAutomationRequestWebhookOnCreateDataSource",
      "example": {},
      "type": "object",
      "required": [
        "name",
        "event",
        "automationType",
        "automationDetails",
        "rules"
      ]
    },
    "PUTAutomationRequest": {
      "title": "PUTAutomationRequest",
      "example": {
        "name": "Auto webhook automation",
        "event": "onTaskFinished",
        "automationType": "webhook",
        "dataType": "task",
        "isActive": true,
        "automationDetails": {
          "url": "https://apiweb.mile.app/webhook",
          "headers": {
            "x-api-key": "1234e98498ce07d29474a7ev2",
            "org": "global"
          }
        },
        "rules": {
          "flow": "Pickup", 
          "flowId": "667b712f63020e5f182f0cb2"
        }
      },
      "type": "object",
      "required": [
        "name",
        "event",
        "automationType",
        "automationDetails",
        "rules"
      ]
    },
    "PATCHAutomationRequest": {
      "title": "PATCHAutomationRequest",
      "example": {
        "name": "Auto webhook automation",
        "event": "onTaskFinished",
        "isActive": false
      },
      "type": "object",
      "properties": {
        "name": {
          "type": "string",
          "description": "Automation's name.<br>**Example:** `Auto webhook automation`"
        },
        "event": {
          "type": "string",
          "description": "Act as a trigger that start an automation. There are 8 different types. <br> *enum: onTaskCreated, onTaskFinished, onTaskAssigned, onDataSourceCreated, onRoutingResultFinished, onRoutingResultDispatched, onStartTrip, onFinishTrip* <br> **onTaskCreated**: Automation will happen when a task is created. <br> **onTaskFinished**: Automation will happen when a task is finished (status task: Done). <br> **onTaskAssigned**: Automation will happen when a task is assigned to field user(s). <br> **onDataSourceCreated**: Automation will happen when a data source is created. <br> **onRoutingResultFinished**: Automation will happen when a routing created is created. <br> **onRoutingResultDispatched**: Automation will happen when a routing is dispatched. <br> **onStartTrip**: Automation will happen when a start trip is triggered. <br> **onFinishTrip**: Automation will happen when a finish trip is triggered. <br>**Example:** `onTaskFinished`"
        },
        "isActive": {
          "type": "boolean",
          "description": "Automation's active state, only active automation will proceed by system<br>**Default:** `true`"
        }
      }
    },
    "automation/id": {
      "title": "automation/id",
      "example": {
        "_id": "61e9754ce857492fd34de7c2",
        "status": true,
        "message": "Automation successfully deleted."
      },
      "type": "object",
      "properties": {
        "_id": {
          "type": "string"
        },
        "status": {
          "type": "boolean"
        },
        "message": {
          "type": "string"
        }
      },
      "required": [
        "_id",
        "status",
        "message"
      ]
    },
    "automation/id1": {
      "title": "automation/id1",
      "type": "object",
      "properties": {
        "data": {
          "$ref": "#/definitions/Data17"
        },
        "status": {
          "type": "boolean"
        }
      },
      "required": [
        "data",
        "status"
      ]
    }
  }
}